#:kivy 1.11.0
#:import C kivy.utils.get_color_from_hex
#:import HoverButton kvhelpers.HoverButton

# MARK: Defining dynamic widgets/classes

<BG@FloatLayout>:
    canvas.before:
        Color:
            rgba: 0.176, 0.243, 0.314 1.0
        Rectangle:
            pos: self.pos
            size: self.size

<AuxoInput@TextInput>:
        background_normal: 'assets/textinput.png'
        background_active: 'assets/textinput_active.png'

        foreground_color: 0.204, 0.286, 0.369, 1.0
        selection_color: 0.925, 0.941, 0.937, 0.5

        font_size: '18sp'
        padding: '16dp', '16dp'
        halign: 'justify'
        border: 10, 10, 10, 10

<AuxoButton@HoverButton>:
    color: [1, 1, 1, 1]
    background_normal: 'assets/black.png'       # FIXME: May add some more color here!

<LoginInput@AuxoInput>:
    multiline: False
    allow_copy: False

<LoginGrid@BoxLayout>:
    orientation: 'vertical'
    canvas:
        Color:
            rgba: 0.925, 0.941, 0.937, 1.0
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: 10, 10, 10, 10

    LoginInput:
        id: input_username
        size_hint_y: None
        height: self.minimum_height
        hint_text: 'username'
        on_text: root.on_username(self.text)

    LoginInput:
        id: input_password
        size_hint_y: None
        height: self.minimum_height
        hint_text: 'password'
        on_text: root.on_password(self.text)

    AuxoButton:
        id: button_login
        size_hint_y: None
        height: '48dp'
        text: 'login'
        on_press: root.dispatch('on_login')


# MARK: The login screen
<LoginScreen>:
    BG:
        LoginGrid:
            id: grid
            center: root.center
            padding: '24dp'
            size_hint: None, None
            size: min(root.width - dp(32), dp(360)), '240dp'
            on_login: root.try_login()


#<LoginScreen>:
#    BoxLayout:
#        orientation: 'vertical'
#
#        canvas.before:
#            Color:
#                rgba: 1, 1, 1, 1
#            Rectangle:
#                pos: self.pos
#                size: self.size
#                source: "assets/white.png"
#
#
#        FloatLayout:
#
#            canvas.before:
#                Color:
#                    rgb: 0, 0, 0  # Project Auxo Black
#                SmoothLine:
#                    width: 2
#                    ellipse: (root.width/2 - 158/2, self.height/2 - 158/2 + 150*1.5, 158, 158, 0, 360)
#
#            canvas:
#                Color:
#                    rgb: 1, 1, 1
#                Ellipse:
#                    id: root_picture
#                    pos: root.width/2 - 150/2, self.height/2 - 150/2 + 150*1.5
#                    size: 150, 150
#                    source: 'assets/Auxo_Logo_Black.png'
#                    angle_start: 0
#                    angle_end: 360
#
#            Label:
#                text: 'Project Auxo v1.0'
#                color: 0, 0, 0, 1
#                font_size: 15
#                size_hint: (1, 0.3)
#
#            TextInput:
#                id: username
#                hint_text: "username"
#                halign: 'center'
#
#                size_hint: (0.5, 1/12)
#                pos_hint: {'center_x': 0.5, 'y': 0.47}
#                background_normal: 'assets/input_line.png'
#                background_active: 'assets/input_line.png'
#                on_text_validate: password.focus = True
#
#            TextInput:
#                id: password
#                hint_text: "password"
#                password: True
#                halign: 'center'
#
#                size_hint: (0.5, 1/12)
#                pos_hint: {'center_x': 0.5, 'y': 0.37}
#                background_normal: 'assets/input_line.png'
#                background_active: 'assets/input_line.png'
#
#                on_text_validate: root.do_login(username.text, password.text)
#
#            HoverButton:
#                id: login
#                text: 'login'
#                on_press: root.do_login(username.text, password.text)
#                color: [1, 1, 1, 1]
#                background_normal: 'assets/black.png'
#
#
#                halign: 'center'
#                valign: 'center'
#
#                size_hint: (0.5, 0.1)
#                pos_hint: {'center_x': 0.5, 'y': 0.20}