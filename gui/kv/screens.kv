#:kivy 1.11.0
#:import C kivy.utils.get_color_from_hex
#:import HoverButton main.HoverButton


<BoxLayout>:
    padding: 10
    spacing: 10

<GridLayout>:
    rows: 4
    cols: 2
    spacing: 10
    row_default_height: 90
    row_force_default: True

<Label>:
    font_size: 25
    font_name: 'assets/open-sans.ttf'

<Button>:
    font_size: 30
    height: 90
    size_hint: (1, None)
    background_normal: 'assets/button_normal.png'
    background_down: 'assets/button_down.png'
    border: (2,2,2,2)

<TextInput>
    font_size: 25
    multiline: False
    padding: [10, 0.5 * (self.height - self.line_height)]
    font_name: 'assets/open-sans.ttf'
    cursor_blink: True
    cursor_color: [0, 0, 0, 1]

<ScrollView>:
    canvas.before:
        Color:
            rgb: 1,1 ,1
        Rectangle:
            pos: self.pos
            size: self.size


# MARK: Screens start below

<LoginScreen>:
    BoxLayout:
        orientation: 'vertical'

        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
                source: "assets/white.png"


        FloatLayout:

            canvas.before:
                Color:
                    rgb: 0, 0.13, 0.278  # Project Auxo Blue
                SmoothLine:
                    width: 2
                    ellipse: (root.width/2 - 158/2, self.height/2 - 158/2 + 150*1.5, 158, 158, 0, 360)

            canvas:
                Color:
                    rgb: 1, 1, 1
                Ellipse:
                    id: root_picture
                    pos: root.width/2 - 150/2, self.height/2 - 150/2 + 150*1.5
                    size: 150, 150
                    source: 'assets/Auxo_Logo_Dark_Blue.png'
                    angle_start: 0
                    angle_end: 360

            Label:
                text: 'Project Auxo v1.0'
                color: 0, 0, 0, 1
                font_size: 15
                size_hint: (1, 0.3)

            TextInput:
                id: username
                hint_text: "username"
                halign: 'center'

                size_hint: (0.5, 1/12)
                pos_hint: {'center_x': 0.5, 'y': 0.47}
                background_normal: 'assets/input_line.png'
                background_active: 'assets/input_line.png'
                on_text_validate: password.focus = True

            TextInput:
                id: password
                hint_text: "password"
                password: True
                halign: 'center'

                size_hint: (0.5, 1/12)
                pos_hint: {'center_x': 0.5, 'y': 0.37}
                background_normal: 'assets/input_line.png'
                background_active: 'assets/input_line.png'

                on_text_validate: root.do_login(username.text, password.text)

            HoverButton:
                id: login
                text: 'login'
                on_press: root.do_login(username.text, password.text)
                color: [1, 1, 1, 1]

                halign: 'center'
                valign: 'center'

                size_hint: (0.5, 0.1)
                pos_hint: {'center_x': 0.5, 'y': 0.20}

<ConnectedScreen>:
    BoxLayout:
        orientation: 'vertical'

        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

        # Row 1
        BoxLayout:
            size_hint_y: 1/8
            orientation: 'horizontal'
            Label:
                text: '[b]signed in as[/b]: ' + app.username
                color: 0, 0, 0, 1
                bold: True
                markup: True

            Image:
                id: loading_circle
                source: 'assets/loading_circle.gif'
                anim_delay: 1/20



        # Row 2
        BoxLayout:
            size_hint_y: 1/8
            orientation: 'horizontal'

            TextInput:
                id: agent_name_input
                hint_text: "ip"
                halign: 'center'

                background_normal: 'assets/input_line.png'
                background_active: 'assets/input_line.png'

            HoverButton:
                text: 'connect'
                on_press: root.connect_to_agent(agent_name_input.text)

        # Row 3
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 1/8
            Label:
                text: "agents' status"
                color: 0, 0, 0, 1
                halign: 'left'

            HoverButton:
                text: 'refresh'
                background_normal: 'assets/light_grey.png'
                on_press: root.on_enter()

        # Row 4
        BoxLayout:
            size_hint_y: 1/2
            orientation: 'horizontal'

            BoxLayout:
                orientation: 'vertical'
                id: bbb_grid_label

            BoxLayout:
                orientation: 'vertical'
                id: bbb_grid_connect_button

        # Row 5
        BoxLayout:
            size_hint_y: 1/8
            orientation: 'horizontal'
            HoverButton:
                text: "logout"
                on_press: root.do_logout()


<AgentScreen>:
    BoxLayout:
        orientation: 'vertical'

        # Row 1
        BoxLayout:
            orientation: 'horizontal'
            Label:
                text: 'toggle LED'
                color: 0, 0, 0, 1

            HoverButton:
                text: 'on/off'
                background_normal: 'assets/green.png'
                on_press: root.toggle_led()

            HoverButton:
                text: 'back'
                background_normal: 'assets/red.png'
                on_press: root.go_back()
